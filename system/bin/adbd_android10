#!/system/bin/sh

# Android 10 Compatible ADB Root Binary
# This script provides compatibility layer for Android 10
# It should be replaced with actual patched binary in production

# Log compatibility mode
log -p i -t adbd "ADB Root Enhanced - Android 10 Compatibility Mode"

# Check if we should use original system adbd for compatibility
if [ -f "/system/bin/adbd.original" ]; then
    # Use original adbd for basic functionality
    exec /system/bin/adbd.original "$@"
else
    # Fallback: try to start in compatibility mode
    log -p w -t adbd "No original adbd found, using compatibility mode"
    
    # Set properties to allow root access
    setprop service.adb.root 1
    setprop ro.debuggable 1
    
    # Keep running to maintain ADB connection
    while true; do
        sleep 60
    done
fi